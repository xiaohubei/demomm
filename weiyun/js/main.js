window.onload=function(){var oTop=document.getElementById("top");var oNav=document.getElementById("nav");var oContent=document.getElementById("content");var oTree=document.getElementById("directory_tree");var oBox=document.getElementById("box");var oConfnBtn=document.getElementById("confnbtn");var oFiles=document.getElementById("files");var oViewTree=document.getElementById("view_tree");var timer=null;var aPhoneico=$("#phone_icos a");var aPhonetip=$("#phone_tips div");var aLen=aPhoneico.length;for(var i=0;i<aLen;i++){Show(aPhoneico,aPhonetip,i);Hide(aPhoneico,aPhonetip,i);function Show(obj1,obj2,i){obj1[i].onmousemove=obj2[i].onmousemove=(function(index){return function(){for(var i=0;i<aLen;i++){obj2[i].style.display="none"}clearTimeout(timer);obj2[index].style.display="block"}})(i)}function Hide(obj1,obj2,i){obj1[i].onmouseout=obj2[i].onmouseout=(function(index){return function(){timer=setTimeout(function(){obj2[index].style.display="none"},300)}})(i)}}var f=new File(fileData);console.log(f);var oSideBarList=document.getElementById("list_1");var d=f.getChildren(0);console.log(d);oFiles.innerHTML="";for(var i=0;i<d.length;i++){createSideBar(oSideBarList,d[i]);createContent(oFiles,d[i])}function createView(d,index){oFiles.innerHTML="";for(var i=0;i<d.length;i++){createSideBar(oSideBarList,d[i]);createContent(oFiles,d[i])}}function createSideBar(context,d){var oLi=document.createElement("li");var html='<span class="folder"></span>'+d.name;if(f.isParent(d.id)){html='<i class="arrow_up"></i>'+html}oLi.innerHTML=html;context.appendChild(oLi)}function createContent(context,d){var oDiv=document.createElement("div");var html="";var type="";if(!d.type){type="folder"}else{type=d.type}oDiv.className="list_wrap ";html='<div class="list_file clear"><label class="checkbox "></label><span class="img"><i class="file_type"></i></span><span class="name">'+d.name+"</span></div>";oDiv.innerHTML=html;oDiv.onclick=function(ev){var ev=ev||event;var data=f.getChildren(d.id);createView(data);ev.cancelBubble=true};context.appendChild(oDiv)}oViewTree.onclick=function(){if(!oViewTree.onoff){oTree.style.display="none";oViewTree.style.backgroundColor="#fff";oViewTree.onoff=true}else{oTree.style.display="block";oViewTree.style.backgroundColor="#e0e4ed";oViewTree.onoff=false}};var oPathWrap=document.getElementById("path_wrap");var oAllselec=oPathWrap.getElementsByTagName("label")[0];var oContextmenu=document.getElementById("content_menu");var num=0;var aFile=getByClass(oFiles,"list_file");var iLen=aFile.length;var oUl=document.getElementById("list_1");var aLi=oUl.getElementsByTagName("li");console.log(aFile);oAllselec.onclick=function(ev){var ev=ev||window.event;if(!oAllselec.onoff){this.className="allselect_all";for(var i=0;i<iLen;i++){Select(aFile[i])}num=aFile.length;oAllselec.onoff=true}else{this.className="allselect";for(var i=0;i<iLen;i++){unSelect(aFile[i])}num=0;oAllselec.onoff=false}document.title=num;ev.cancelBubble=true;return false};function Select(obj){oCheckBox=obj.getElementsByTagName("label")[0];addClass(obj,"move");oCheckBox.style.display="block";addClass(oCheckBox,"selected");oCheckBox.onoff=true}function unSelect(obj){oCheckBox=obj.getElementsByTagName("label")[0];removeClass(obj,"move");oCheckBox.style.display="none";removeClass(oCheckBox,"selected");oCheckBox.onoff=false}for(var i=0;i<iLen;i++){Move(aFile[i]);RightClick(aFile[i])}function Move(obj){var oCheckBox=obj.getElementsByTagName("label")[0];obj.onmouseover=function(ev){addClass(this,"move");oCheckBox.style.display="block";oCheckBox.onclick=function(ev){var ev=ev||window.event;ClickBox(oCheckBox);ev.cancelBubble=true}};obj.onmouseout=function(){if(!oCheckBox.onoff){removeClass(this,"move");oCheckBox.style.display="none"}}}function ClickBox(obj){if(!obj.onoff){num++;addClass(obj,"selected");obj.onoff=true}else{num--;removeClass(obj,"selected");obj.onoff=false}document.title=num;num==iLen?oAllselec.className="allselect_all":oAllselec.className="allselect";return false}document.oncontextmenu=function(){return false};function RightClick(obj){obj.oncontextmenu=function(ev){var ev=ev||window.event;var disX=ev.clientX;var disY=ev.clientY;var disL=disX-oFiles.getBoundingClientRect().left;var disT=disY-oFiles.getBoundingClientRect().top;oContextmenu.style.display="block";oContextmenu.style.left=disX+"px";oContextmenu.style.top=disY+"px";return false;ev.cancelBubble=true}}document.onclick=function(){oContextmenu.style.display="none";if(num=!0){for(var i=0;i<iLen;i++){unSelect(aFile[i])}oAllselec.className="allselect";oAllselec.onoff=false;num=0;document.title=num}};var iW=document.documentElement.clientWidth;var iH=document.documentElement.clientHeight;var navWidth=oNav.offsetWidth;var navHeight=oNav.offsetHeight;var treeWidth=oTree.offsetWidth;var treeHeight=oTree.offsetHeight;var topHeight=oTop.offsetHeight;var btnHeight=oConfnBtn.offsetHeight;oContent.style.width=iW-navWidth+"px";oBox.style.width=iW-navWidth-treeWidth+"px";window.onresize=function(){iW=document.documentElement.clientWidth;
iH=document.documentElement.clientHeight;oContent.style.width=iW-navWidth+"px";oBox.style.width=iW-navWidth-treeWidth+"px"};function getByClass(oParent,sClass){var aEle=oParent.getElementsByTagName("*");var aResult=[];for(var i=0;i<aEle.length;i++){if(hasClass(aEle[i],sClass)){aResult.push(aEle[i])}}return aResult}function hasClass(obj,sClass){var aclassName=obj.className.split(" ");if(!sClass){return}for(var i=0;i<aclassName.length;i++){if(aclassName[i]==sClass){return true}}return false}function removeClass(obj,sClass){var aClass=obj.className.split(" ");if(!obj.className){return}for(var i=0;i<aClass.length;i++){if(aClass[i]==sClass){aClass.splice(i,1);obj.className=aClass.join(" ")}}}function addClass(obj,sClass){var aClass=obj.className.split(" ");if(!obj.className){obj.className=sClass;return}for(var i=0;i<aClass.length;i++){if(aClass[i]==sClass){return}}obj.className+=" "+sClass}};